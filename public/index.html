<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wrestling Shoes, Gear & Apparel | Wrestle Swap</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: "Market Sans", Arial, sans-serif;
            background-color: #ffffff;
        }

        /* Header */
        .top-bar {
            background-color: #ffffff;
            border-bottom: 1px solid #e5e5e5;
            padding: 8px 0;
            font-size: 12px;
        }

        .top-bar-content {
            max-width: 1280px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
        }

        .top-bar a {
            color: #020000;
            text-decoration: none;
            margin: 0 10px;
        }
        
        .top-bar-btn {
            padding: 4px 16px;
            margin: 0 5px;
            cursor: pointer;
            border: 0px solid #ccc;
            background: #fff;
            border-radius: 4px;
            font-size: 12px;
            color: #000;
        }

        .top-bar-btn:hover {
            background: #f0f0f0;
        }

        /* Dropdown Menu Styles */
        .user-menu-container {
            position: relative;
            display: inline-block;
        }

        .dropdown-menu {
            display: none;
            position: absolute;
            top: 100%;
            left: 0;
            background-color: white;
            border: 1px solid #e5e5e5;
            border-radius: 4px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            min-width: 180px;
            margin-top: 0px;
            z-index: 1000;
        }

        .dropdown-menu a {
            display: block;
            padding: 10px 16px;
            color: #333;
            text-decoration: none;
            font-size: 13px;
            border-bottom: 1px solid #f0f0f0;
        }

        .dropdown-menu a:last-child {
            border-bottom: none;
        }

        .dropdown-menu a:hover {
            background-color: #f5f5f5;
        }

        .user-menu-container:hover .dropdown-menu {
            display: block;
        }

        /* Main Header */
        .main-header {
            background-color: #fff;
            padding: 12px 0;
            border-bottom: 1px solid #e5e5e5;
        }

        .header-content {
            max-width: 1280px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .logo {
            font-size: 32px;
            font-weight: bold;
            color: #c41e3a;
            text-decoration: none;
        }

        .search-container {
            flex: 1;
            display: flex;
            gap: 10px;
        }

        .search-box {
            flex: 1;
            display: flex;
            border: 2px solid #3665f3;
            border-radius: 4px;
            overflow: hidden;
        }

        .search-input {
            flex: 1;
            padding: 12px;
            border: none;
            outline: none;
            font-size: 16px;
        }

        .category-select {
            padding: 12px;
            border: none;
            border-left: 1px solid #ccc;
            background: #fff;
            cursor: pointer;
            font-size: 14px;
            min-width: 150px;
        }

        .search-btn {
            background-color: #3665f3;
            color: white;
            border: none;
            padding: 0 24px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 500;
        }

        .search-btn:hover {
            background-color: #2348c5;
        }

        .header-links a {
            color: #333;
            text-decoration: none;
            margin-left: 20px;
            font-size: 14px;
        }

        /* Navigation */
        .nav-bar {
            background-color: #fff;
            border-bottom: 1px solid #e5e5e5;
            padding: 10px 0;
        }

        .nav-content {
            max-width: 1280px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            gap: 24px;
        }

        .nav-content a {
            color: #333;
            text-decoration: none;
            font-size: 14px;
            font-weight: 500;
        }

        .nav-content a:hover {
            color: #3665f3;
        }

        /* Main Content */
        .container {
            max-width: 1280px;
            margin: 20px auto;
            padding: 0 20px;
        }

        /* Banner */
            .banner {
            background: url("https://www.pennsylvaniartc.org/static/sitefiles/news/News-Jul-2020-Jordan-Burroughs.jpg");
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            color: white;
            padding: 60px 40px;
            border-radius: 8px;
            margin-bottom: 30px;
            text-align: center;
            }

        .banner h1 {
            font-size: 42px;
            margin-bottom: 16px;
        }

        .banner p {
            font-size: 20px;
            margin-bottom: 24px;
        }

        .banner-btn {
            background-color: white;
            color: #667eea;
            border: none;
            padding: 14px 32px;
            font-size: 16px;
            font-weight: bold;
            border-radius: 4px;
            cursor: pointer;
        }

        .banner-btn:hover {
            background-color: #f0f0f0;
        }

        /* Categories */
        .section-title {
            font-size: 24px;
            margin-bottom: 20px;
            font-weight: 600;
        }

        .categories {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 16px;
            margin-bottom: 40px;
        }

        .category-card {
            background: white;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: box-shadow 0.2s;
            border: 1px solid #e5e5e5;
        }

        .category-card:hover {
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .category-icon {
            font-size: 40px;
            margin-bottom: 10px;
        }

        .category-name {
            font-size: 14px;
            font-weight: 500;
            color: #333;
        }

        /* Product Grid */
        .products {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .product-card {
            background: white;
            border-radius: 8px;
            overflow: hidden;
            cursor: pointer;
            transition: box-shadow 0.2s;
            border: 1px solid #e5e5e5;
        }

        .product-card:hover {
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .product-image {
            width: 100%;
            height: 220px;
            background: linear-gradient(135deg, #e0e0e0 0%, #f5f5f5 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 60px;
            color: #ccc;
        }

        .product-info {
            padding: 16px;
        }

        .product-title {
            font-size: 14px;
            color: #333;
            margin-bottom: 8px;
            height: 40px;
            overflow: hidden;
        }

        .product-price {
            font-size: 18px;
            font-weight: bold;
            color: #333;
            margin-bottom: 4px;
        }

        .product-shipping {
            font-size: 12px;
            color: #707070;
        }

        .product-seller {
            font-size: 12px;
            color: #707070;
            margin-top: 4px;
        }

        .product-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .loading-products {
            text-align: center;
            padding: 40px;
            color: #707070;
        }

        /* Footer */
        .footer {
            background-color: #fff;
            border-top: 1px solid #e5e5e5;
            padding: 40px 0 20px;
            margin-top: 60px;
        }

        .footer-content {
            max-width: 1280px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .footer-links {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 30px;
            margin-bottom: 30px;
        }

        .footer-column h3 {
            font-size: 14px;
            margin-bottom: 12px;
            color: #333;
        }

        .footer-column a {
            display: block;
            color: #707070;
            text-decoration: none;
            font-size: 12px;
            margin-bottom: 8px;
        }

        .footer-bottom {
            text-align: center;
            color: #707070;
            font-size: 12px;
            padding-top: 20px;
            border-top: 1px solid #e5e5e5;
        }
    </style>
</head>
<body>
    <!-- Top Bar -->
    <div class="top-bar">
        <div class="top-bar-content">
            <div>
                <!-- User Menu Container - This will be updated by JavaScript -->
                <span id="user-menu-wrapper">
                    <button class="top-bar-btn" id="user-greeting" onclick="window.location.href='sign-in.html'">Hi! Sign in</button>
                </span>
                <button class="top-bar-btn" onclick="window.location.href='help.html'">Help & Contact</button>
            </div>
            <div>
                <button class="top-bar-btn" onclick="window.location.href='sell.html'">Sell</button>
                <button class="top-bar-btn" onclick="window.location.href='settings.html'">Settings</button>
            </div>
        </div>
    </div>

    <!-- Main Header -->
    <div class="main-header">
        <div class="header-content">
            <a href="index.html" class="logo">Wrestle Swap</a>
            <div class="search-container">
                <div class="search-box">
                    <input 
                        type="text" 
                        class="search-input" 
                        id="search-input"
                        placeholder="Search for wrestling shoes, singlets, gear..."
                        onkeypress="if(event.key==='Enter') performSearch()"
                    >

                </div>
                <button class="search-btn" onclick="performSearch()">Search</button>
            </div>
            <button class="top-bar-btn" onclick="window.location.href='track.html'">Track <div></div>Packages</button>
        </div>
    </div>

    <!-- Navigation -->
    <div class="nav-bar">
        <div class="nav-content">
            <a href="watchlist.html">Saved</a>
            <a href="search.html">All Categories</a>
            <a href="search.html?q=shoes">Wrestling Shoes</a>
            <a href="search.html?q=singlet">Singlets</a>
            <a href="search.html?q=shirt">Shirts</a>
            <a href="search.html?q=bottoms">Bottoms</a>
            <a href="search.html?q=bags">Bags</a>
        </div>
    </div>

    <!-- Main Content -->
    <div class="container">
        <!-- Banner -->
        <div class="banner">
            <h1>Buy & Sell Wrestling Gear</h1>
            <p>Find quality wrestling equipment at great prices</p>
            <button class="banner-btn" onclick="window.location.href='search.html'">Shop Now</button>
        </div>

        <!-- Categories -->
        <h2 class="section-title">Explore Popular Categories</h2>
        <div class="categories">
            <div class="category-card" onclick="window.location.href='search.html?q=shoes'">
                <img src="https://cdn11.bigcommerce.com/s-ob1gxw6h/images/stencil/1280x1280/products/1815/16182/Untitled_design_60__78315.1727788914.png?c=20" alt="Wrestling Shoes" style="width: 80px; height: 80px; object-fit: contain; margin-bottom: 10px;">
                <div class="category-name">Wrestling Shoes</div>
            </div>
            <div class="category-card" onclick="window.location.href='search.html?q=singlet'">
                <img src="https://virusintl.com/cdn/shop/products/elevate-singlet-bksl-updated-1_36aef470-80ee-4158-95ed-bed4eaa03fcf.jpg?v=1698367209&width=3840" alt="Singlets" style="width: 80px; height: 80px; object-fit: contain; margin-bottom: 10px;">
                <div class="category-name">Singlets</div>
            </div>
            <div class="category-card" onclick="window.location.href='search.html?q=accessories'">
                <img src="https://images.footballfanatics.com/usa-wrestling/mens-heather-gray-usa-wrestling-radiating-victory-t-shirt_ss5_p-200582126+pv-1+u-qyxjpp1vyzbbqjic0ara+v-bntg3xaqmktnhj5tbivy.jpg?_hv=2&w=1018" alt="Tops" style="width: 80px; height: 80px; object-fit: contain; margin-bottom: 10px;">
                <div class="category-name">Tops</div>
            </div>
            <div class="category-card" onclick="window.location.href='search.html?q=bottoms'">
                <img src="https://www.flowholdsd.com/cdn/shop/files/IMG_1427_jpg-min_720x.png?v=1698344274" alt="Bottoms" style="width: 80px; height: 80px; object-fit: contain; margin-bottom: 10px;">
                <div class="category-name">Bottoms</div>
            </div>
            <div class="category-card" onclick="window.location.href='search.html?q=bags'">
                <img src="https://cliffkeen.com/cdn/shop/files/MBP13-WH_1.png?crop=center&height=1200&v=1709304359&width=1200" alt="Bags" style="width: 80px; height: 80px; object-fit: contain; margin-bottom: 10px;">
                <div class="category-name">Bags</div>
            </div>
        </div>
            
        <!-- Products -->
        <h2 class="section-title">Today's Deals</h2>

        <div class="loading-products" id="loading-products">Loading products...</div>
        <div class="products" id="products-container"></div>
    </div>

    <!-- Footer -->
    <div class="footer">
        <div class="footer-content">
            <div class="footer-links">
                <div class="footer-column">
                    <h3>Buyer and Seller</h3>
                    <a href="sign-in.html">Registration</a>
                    <a href="money-back.html">Swaps Money Back Guarantee</a>
                    <a href="shipping-instructions.html">Shipping my item</a>
                </div>
                <div class="footer-column">
                    <h3>About Wrestle Swap</h3>
                    <a href="#">Company info</a>
                    <a href="careers.html">Careers</a>
                </div>
                <div class="footer-column">
                    <h3>Help & Contact</h3>
                    <a href="#">Seller Information Center</a>
                    <a href="help.html">Contact us</a>
                </div>
                <div class="footer-column">
                    <h3>Community</h3>
                    <a href="#">Announcements</a>
                    <a href="track.html">Track Order</a>
                </div>
            </div>
            <footer style="background: #dad0d0; padding: 30px; text-align: center;">
                <div>
                    <a href="legal/privacy-policy.html" style="color: #333; margin: 0 15px;">Privacy Policy</a>
                    <a href="legal/cookie.html" style="color: #333; margin: 0 15px;">Cookie Policy</a>
                    <a href="legal/adchoice.html" style="color: #333; margin: 0 15px;">AdChoices</a>
                </div>
                <p style="margin-top: 15px; font-size: 12px; color: #666;">
                    Â© 2024 Wrestle Swap. All rights reserved.
                </p>
            </footer>
        </div>
    </div>

    <!-- Firebase SDK for User Greeting and Products -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
        import { getFirestore, collection, query, where, getDocs, orderBy, limit } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyBrNzOA__bI6zA2PvTFTujmFiBLsCe1iBk",
            authDomain: "wrestleswap.firebaseapp.com",
            projectId: "wrestleswap",
            storageBucket: "wrestleswap.firebasestorage.app",
            messagingSenderId: "857051782398",
            appId: "1:857051782398:web:bb4ab3f98e8dbbc8cad9af",
            measurementId: "G-B411WXLF3J"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);

        // Handle user greeting with dropdown for signed-in users
        onAuthStateChanged(auth, (user) => {
            const menuWrapper = document.getElementById('user-menu-wrapper');

            if (user) {
                // User is signed in - show dropdown menu
                const firstName = user.displayName ? user.displayName.split(' ')[0] : user.email.split('@')[0];
                
                // Create the dropdown menu HTML
                menuWrapper.innerHTML = `
                    <div class="user-menu-container">
                        <button class="top-bar-btn" onclick="window.location.href='profile.html'">Hi, ${firstName}!</button>
                        <div class="dropdown-menu">
                            <a href="watchlist.html">Watchlist</a>
                            <a href="my-orders.html">Your Orders</a>
                            <a href="listings-manager.html">Your Listings</a>
                        </div>
                    </div>
                `;
            } else {
                // User is not signed in - show simple sign-in button
                menuWrapper.innerHTML = `
                    <button class="top-bar-btn" onclick="window.location.href='sign-in.html'">Hi! Sign in</button>
                `;
            }
        });

        // Load products from Firestore
        async function loadProducts() {
            const container = document.getElementById('products-container');
            const loading = document.getElementById('loading-products');

            try {
                const q = query(
                    collection(db, 'products'),
                    where('active', '==', true),
                    limit(12)
                );

                const querySnapshot = await getDocs(q);
                const products = [];

                querySnapshot.forEach((doc) => {
                    const data = doc.data();
                    // Skip sold products
                    if (data.sold === true) return;

                    products.push({
                        id: doc.id,
                        title: data.title,
                        price: data.price || 0,
                        sellerName: data.sellerName || 'Unknown Seller',
                        images: data.images || [],
                        condition: data.condition || ''
                    });
                });

                loading.style.display = 'none';

                if (products.length === 0) {
                    container.innerHTML = '<p style="text-align: center; color: #707070; padding: 40px;">No products available yet. Be the first to list!</p>';
                    return;
                }

                container.innerHTML = products.map(product => {
                    const imageDisplay = product.images && product.images.length > 0
                        ? `<img src="${product.images[0]}" alt="${product.title}">`
                        : 'ðŸ“¦';

                    return `
                        <div class="product-card" onclick="window.location.href='productdetail.html?id=${product.id}'">
                            <div class="product-image">${imageDisplay}</div>
                            <div class="product-info">
                                <div class="product-title">${product.title}</div>
                                <div class="product-price">$${product.price.toFixed(2)}</div>
                                <div class="product-seller">${product.sellerName}</div>
                            </div>
                        </div>
                    `;
                }).join('');

            } catch (error) {
                console.error('Error loading products:', error);
                loading.textContent = 'Error loading products. Please refresh.';
            }
        }

        // Load products when page loads
        loadProducts();
    </script>

    <!-- Search Function -->
    <script>
        function performSearch() {
            const searchTerm = document.getElementById('search-input').value;
            const category = document.getElementById('category-select').value;
            
            let url = 'search.html?';
            
            if (searchTerm) {
                url += 'q=' + encodeURIComponent(searchTerm);
            }
            
            if (category) {
                url += (searchTerm ? '&' : '') + 'category=' + encodeURIComponent(category);
            }
            
            if (!searchTerm && !category) {
                url = 'search.html';
            }
            
            window.location.href = url;
        }
    </script>
</body>
</html>